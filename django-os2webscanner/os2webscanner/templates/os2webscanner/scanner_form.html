{% extends 'os2webscanner/base.html' %}
{% load staticfiles %}
{% block topnav %}{% endblock %}

{% block extra_head_html %}
<link href="{% static "recurrence/css/recurrence.css" %}" rel="stylesheet" />
<script type="text/javascript" src="/jsi18n/"></script>
<script type="text/javascript" src="{% static 'recurrence/js/recurrence.js' %}"></script>
<script type="text/javascript" src="{% static 'recurrence/js/recurrence-widget.js' %}"></script>
{% endblock %}

{% block body %}
{% if 0 %}
  <form class="form-horizontal" role="form">
  {% if form.non_field_errors %}
    <ul>
      {% for error in form.non_field_errors %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
  {% endif %}
  {% for field in form %}
  <div id="{{ field.auto_id }}_container">
    {{ field.help_text }}
    <div>
      {{ field.label_tag }} {{ field }}
    </div>
    <div id="{{ field.auto_id }}_errors">
      {{ field.errors }}
    </div>
  </div>
  {% endfor %}
  </form>
{% endif %}

<form class="form-horizontal" role="form" method="post">
  {% if form.non_field_errors %}
    <ul>
      {% for error in form.non_field_errors %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
  {% endif %}
  {% if form.errors %}
    <p>Følgende felter er ikke udfyldt korrekt:</p>
    <ul>
      {% for error in form.errors %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
  {% endif %}
  <div class="form-group col-sm-12">
    {% csrf_token %}
    <div class="form-group col-sm-12">
      <div id="{{ form.name.auto_id }}_container">
        <div>{{ form.name.help_text }}</div>
        <div>
          {{ form.name.label_tag }}
          {{ form.name }}
        </div>
        <div id="{{ form.name.auto_id }}_errors">
          {{ form.name.errors }}
        </div>
      </div>
    </div>
    {% if form.organization %}
    <div class="form-group col-sm-12">
      <div id="{{ form.organization.auto_id }}_container">
        <div>{{ form.organization.help_text }}</div>
        <div>
          {{ form.organization.label_tag }}
          {{ form.organization }}
        </div>
        <div id="{{ form.organization.auto_id }}_errors">
          {{ form.organization.errors }}
        </div>
      </div>
    </div>
    {% endif %}
    <ul class="nav nav-tabs" style="margin-bottom:1em;">
      <li class="active"><a href="#domains" data-toggle="tab">Domæner</a></li>
      <li><a href="#rules" data-toggle="tab">Regler</a></li>
      <li><a href="#interval" data-toggle="tab">Interval</a></li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane active" id="domains">
        <div class="form-group">
          <div class="col-sm-12">
            <div id="{{ form.domains.auto_id }}_container">
              <div>{{ form.domains.label_tag }}</div>
              <div>{{ form.domains.help_text }}</div>
              <div>{{ form.domains }}</div>
              <div id="{{ form.domains.auto_id }}_errors">
                {{ form.domains.errors }}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="rules">
        <div class=" col-sm-12">
          <div id="{{ form.do_cpr_scan.auto_id }}_container">
            <div>{{ form.do_cpr_scan.help_text }}</div>
            <div>
              {{ form.do_cpr_scan }} {{ form.do_cpr_scan.label_tag }}
            </div>
            <div id="{{ form.do_cpr_scan.auto_id }}_errors">
              {{ form.do_cpr_scan.errors }}
            </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div id="{{ form.do_name_scan.auto_id }}_container">
            <div>{{ form.do_name_scan.help_text }}</div>
            <div>
              {{ form.do_name_scan }} {{ form.do_name_scan.label_tag }}
            </div>
            <div id="{{ form.do_name_scan.auto_id }}_errors">
              {{ form.do_name_scan.errors }}
            </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div id="{{ form.do_ocr.auto_id }}_container">
            <div>{{ form.do_ocr.help_text }}</div>
            <div>
              {{ form.do_ocr }} {{ form.do_ocr.label_tag }}
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12">
            <div id="{{ form.regex_rules.auto_id }}_container">
              <div>{{ form.regex_rules.label_tag }}</div>
              <div>{{ form.regex_rules.help_text }}</div>
              <div>{{ form.regex_rules }}</div>
              <div id="{{ form.regex_rules.auto_id }}_errors">
                {{ form.regex_rules.errors }}
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12">
            <div id="{{ form.whitelisted_names.auto_id }}_container">
              <div>{{ form.whitelisted_names.label_tag }}</div>
              <div>{{ form.whitelisted_names.help_text }}</div>
              <div>{{ form.whitelisted_names }}</div>
              <div id="{{ form.whitelisted_names.auto_id }}_errors">
                {{ form.whitelisted_names.errors }}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="interval">
        <div class="form-group col-sm-12">
          <div id="{{ form.schedule.auto_id }}_container">
            <div>{{ form.schedule.help_text }}</div>
            <div>
              <div>{{ form.schedule.label_tag }}</div>
              {{ form.schedule }}
            </div>
            <div id="{{ form.schedule.auto_id }}_errors">
              {{ form.schedule.errors }}
            </div>
          </div>
        </div>
        {% if object.pk %}
        <p>
          Scanneren vil starte på følgende tidspunkt på de valgte dage:<br />
          {{ object.get_start_time }}
        </p>
        {% endif %}
      </div>
    </div>
    <div class="form-group clearfix">
    <div class="col-sm-12">
      <br />
      <button type="submit" class="btn btn-primary" name="save">
        Gem ændringer
      </button>
    </div>
  </div>
  </div>
</form>
{% endblock %}
