{% extends 'os2webscanner/base.html' %}
{% load staticfiles %}
{% block rendertype %}iframe-modal{% endblock %}
{% block topnav %}{% endblock %}

{% block extra_head_html %}
<link href="{% static "recurrence/css/recurrence.css" %}" rel="stylesheet" />
<script type="text/javascript" src="/jsi18n/"></script>
<script type="text/javascript" src="{% static 'recurrence/js/recurrence.js' %}"></script>
<script type="text/javascript" src="{% static 'recurrence/js/recurrence-widget.js' %}"></script>
{% endblock %}

{% block body %}
{% if 0 %}
  <form class="form" role="form">
  {% if form.non_field_errors %}
    <ul>
      {% for error in form.non_field_errors %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
  {% endif %}
  {% for field in form %}
  <div id="{{ field.auto_id }}_container">
    {{ field.help_text }}
    <div>
      {{ field.label_tag }} {{ field }}
    </div>
    <div id="{{ field.auto_id }}_errors">
      {{ field.errors }}
    </div>
  </div>
  {% endfor %}
  </form>
{% endif %}

{% if form.non_field_errors %}
  <ul>
    {% for error in form.non_field_errors %}
      <li>{{ error }}</li>
    {% endfor %}
  </ul>
{% endif %}
{% if form.errors %}
  <div class="alert alert-danger" role="alert">
      <p>Følgende felter er ikke udfyldt korrekt:</p>
      <ul>
        {% for error in form.errors %}
          <li>{{ error }}</li>
        {% endfor %}
      </ul>
  </div>
{% endif %}
<form class="form" role="form" method="post">
    {% csrf_token %}
      <div id="{{ form.name.auto_id }}_container" class="form-group{% if form.name.errors %} has-error{% endif %}">
          <label class="control-label" for="id_{{ form.name.name }}">{{ form.name.label }}</label>
          {% if form.name.help_text %}<small>{{ form.name.help_text }}</small>{% endif %}
	  <input type="text" class="form-control" name="{{ form.name.name }}" id="id_{{ form.name.name }}" {% if form.name.value %}value="{{ form.name.value }}"{% endif %}>
        {% if 0 %}<div id="{{ form.name.auto_id }}_errors">
          {{ form.name.errors }}
        </div>{% endif %}
      </div>
    {% if form.organization %}
      <div id="{{ form.organization.auto_id }}_container" class="form-group{% if form.organization.errors %} has-error{% endif %}">
          <label class="control-label" for="id_{{ form.organization.name }}">{{ form.organization.label }}</label>
          {% if form.organization.help_text %}<small>{{ form.organization.help_text }}</small>{% endif %}
          {% if 0 %}{{ form.organization }}{% endif %}
	  <select name="{{ form.organization.name }}" id="id_{{ form.organization.name }}" class="form-control">
	    {% for value, tag in form.organization.field.choices %}
	      <option value="{{ value }}">{{ tag }}</option>
	    {% endfor %}
	  </select>
        </div>
        {% if 0 %}<div id="{{ form.organization.auto_id }}_errors">
          {{ form.organization.errors }}
        </div>{% endif %}
      </div>
    {% endif %}
    <ul class="nav nav-tabs" id="scanner-settings-tabs">
      <li class="active"><a href="#domains" data-toggle="tab">Domæner</a></li>
      <li><a href="#rules" data-toggle="tab">Regler</a></li>
      <li><a href="#interval" data-toggle="tab">Interval</a></li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane active" id="domains">
        <div id="{{ form.domains.auto_id }}_container" class="form-group{% if form.domains.errors %} has-error{% endif %}">
          <label class="control-label" for="id_{{ form.domains.name }}">{{ form.domains.label }}</label>
          {% if form.domains.help_text %}<small>{{ form.domains.help_text }}</small>{% endif %}
	  <select name="{{ form.domains.name }}" id="id_{{ form.domains.name }}" class="form-control" multiple>
	    {% for value, tag in form.domains.field.choices %}
	      <option value="{{ value }}">{{ tag }}</option>
	    {% endfor %}
	  </select>
        </div>
      </div>
      <div class="tab-pane" id="rules">
          <div id="select_scan_rules_container" class="form-group">
	    <span style="display:inline;" id="{{ form.do_cpr_scan.auto_id }}_container"{% if form.do_cpr_scan.errors %} class="has-error"{% endif %}>
              <label class="control-label inline-checkbox" for="id_{{ form.do_cpr_scan.name }}">
		<input type="checkbox" class="form-control" id="id_{{ form.do_cpr_scan.name }}" name="{{ form.do_cpr_scan.name }}" value="{{ form.do_cpr_scan.name }}" checked>
	        {{ form.do_cpr_scan.label }}
                {% if form.do_cpr_scan.help_text %}<small>{{ form.do_cpr_scan.help_text }}</small>{% endif %}
	      </label>
	    </span>
	    <span id="{{ form.do_name_scan.auto_id }}_container"{% if form.do_name_scan.errors %} class="has-error"{% endif %}>
	      <label class="control-label inline-checkbox" for="id_{{ form.do_name_scan.name }}">
		<input type="checkbox" class="form-control" id="id_{{ form.do_name_scan.name }}" name="{{ form.do_name_scan.name }}" value="{{ form.do_name_scan.name }}" checked>
		{{ form.do_name_scan.label }}
                {% if form.do_name_scan.help_text %}<small>{{ form.do_name_scan.help_text }}</small>{% endif %}
	      </label>
	    </span>
	    <span id="{{ form.do_ocr.auto_id }}_container"{% if form.do_ocr.errors %} class="has-error"{% endif %}>
	      <label class="control-label inline-checkbox" for="id_{{ form.do_ocr.name }}">
		<input type="checkbox" class="form-control" id="id_{{ form.do_ocr.name }}" name="{{ form.do_ocr.name }}" value="{{ form.do_ocr.name }}" checked>
		{{ form.do_ocr.label }}
                {% if form.do_ocr.help_text %}<small>{{ form.do_ocr.help_text }}</small>{% endif %}
	      </label>
	    </span>
          </div>
            <div id="{{ form.regex_rules.auto_id }}_container">
              <div>{{ form.regex_rules.label_tag }}</div>
              <div>{{ form.regex_rules.help_text }}</div>
              <div>{{ form.regex_rules }}</div>
              <div id="{{ form.regex_rules.auto_id }}_errors">
                {{ form.regex_rules.errors }}
              </div>
            </div>
            <div id="{{ form.whitelisted_names.auto_id }}_container">
              <div>{{ form.whitelisted_names.label_tag }}</div>
              <div>{{ form.whitelisted_names.help_text }}</div>
              <div>{{ form.whitelisted_names }}</div>
              <div id="{{ form.whitelisted_names.auto_id }}_errors">
                {{ form.whitelisted_names.errors }}
              </div>
            </div>
      </div>
      <div class="tab-pane" id="interval">
        <div class="form-group col-sm-12">
          <div id="{{ form.schedule.auto_id }}_container">
            <div>{{ form.schedule.help_text }}</div>
            <div>
              <div>{{ form.schedule.label_tag }}</div>
              {{ form.schedule }}
            </div>
            <div id="{{ form.schedule.auto_id }}_errors">
              {{ form.schedule.errors }}
            </div>
          </div>
        </div>
        {% if object.pk %}
        <p>
          Scanneren vil starte på følgende tidspunkt på de valgte dage:<br />
          {{ object.get_start_time }}
        </p>
        {% endif %}
      </div>
    </div>
    <div class="form-group clearfix">
    <div class="col-sm-12">
      <br />
      <button type="submit" class="btn btn-primary" name="save">
        Gem ændringer
      </button>
    </div>
  </div>
</form>
{% endblock %}
