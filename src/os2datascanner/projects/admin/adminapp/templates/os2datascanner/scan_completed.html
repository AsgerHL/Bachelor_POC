{% extends 'partials/base.html' %}
{% load l10n %}
{% load staticfiles %}
{% load tz %}

{% block body %}
<main class="wrapper">
    {% include "partials/main.html" with active_tab="status" %}

    <div class="content">

        {% include "os2datascanner/scanner_tabs.html" with page="scan-status"  %}

        <div class="aside">
            <h1 class="page-title">Udførte scanninger</h1>
        </div>

        <table class="datatable">
          <thead>
            <tr>
              <th>Scannerjob</th>
              <th class="datatable__column--org">Startet</th>
              <th class="datatable__column--automatic">Objekter</th>
              <th class="datatable__column--actions">Status</th>
            </tr>
          </thead>

          <tbody>
            {% for status in object_list %}
              {% widthratio status.fraction_scanned 1.0 100 as percentage %}
              {% if percentage == "100" %}
                <tr tabindex="0">
                  <td>
                      {{ status.scanner.name }}
                  </td>
                  <td>
                    {% timezone "Europe/Copenhagen" %}
                    {{ status.start_time }}
                    {% endtimezone %}
                  </td>
                  <td>
                    {{ status.total_objects }} objekter udforsket
                  </td>
                  <td>
                    <span class="completed_icon">
                      {% include "components/svg-icons/check_circle_full.svg" %}
                      <span class="width">Udført</span>
                    </span>
                  </td>
                </tr>
              {% endif %}
            {% endfor %}
          </tbody>
        </table>
    </div>
</main>
{% endblock %}
