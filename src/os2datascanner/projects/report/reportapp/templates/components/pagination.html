{%  load i18n %}
{% load pagination_tags %}

{% if is_paginated %}
<table class="pagination-table">
  <tbody>
    <tr>
      <td class="pagination-table__column--page">
        {{ page_obj.number }} af {{ paginator.num_pages }}
      </td>
    
      <td class="pagination-table__column--pages">
        <div class="flex">
          <!-- {% if page_obj.has_previous %}
          <a href="?{% param_replace page=1 %}">
            {% trans "First" %}
          </a> -->
          {% if page_obj.previous_page_number != 0 %}
          <a href="?{% param_replace page=page_obj.previous_page_number %}">
            <span class="flex">
              <i id="chevron_left" class="material-icons">chevron_left</i>
              {% trans "Previous" %}
            </span>
          </a>
          {% endif %}
          <!-- {% endif %} -->

                {% if paginator.num_pages > 1 %}
                  {% for n in paginator.page_range %}
                    {% if page_obj.number|add:'-2' == n %}<!-- If current page -2 = 1 (n)  -->
                      {# First page #}
                      <a class="page" href="?{% param_replace page=1 %}">1</a>
                      {% if n != 1 %}
                        <a>...</a>
                      {% endif %}
                    {% elif page_obj.number == n %}
                      {# Current page #}
                      <a class="page page--active" href="#">{{ n }}</a>
                        {# Set how many pages on each side of current page #}
                    {% elif page_obj.number|add:'-2' < n and n < page_obj.number|add:'2' %} {# Pages around current page #}
                        <a class="page" href="?{% param_replace page=n %}">{{ n }}</a>
                    {% elif page_obj.number|add:'2' == n %}
                      {# Last page #}
                      {% if page_obj.number != paginator.num_pages %}
                        <a>...</a>
                      {% endif %}
                        <a class="page" href="?{% param_replace page=paginator.num_pages %}">{{ paginator.num_pages }}</a>
                    {% endif %}
                  {% endfor %}
              {% endif %}
          {% if page_obj.has_next %}
          {% if page_obj.next_page_number != paginator.num_pages %}
          <a href="?{% param_replace page=page_obj.next_page_number %}">
            <span class="flex">
              {% trans "Next" %}
              <i id="chevron_right" class="material-icons">chevron_right</i>
            </span>
          </a>
          {% endif %}
          {% endif %}
        </div>
      </td>
    </tr>
  </tbody>
</table>
{% endif %}
