{% for rule in match_by_type.data.matches.matches %}
<tr tabindex="0" data-type="smbc">

  <td class="datatable__column--filetype-icon">
    <span class="icon-filetype icon-filetype--smbc">
      {% include "components/svg-icons/icon-office365.html" %}
    </span>
  </td>

  <td class="datatable__column--item">
    <span class="scan__item-title">{{ match_by_type.data.matches.handle.path }}</span>
    <div>
      {{ rule.matches|length }}
    </div>

    <div class="scan__item-meta">
      <span class="">{{ match_by_type.data.matches.handle.path }}</span>
    </div>

    <div class="hit-link">
      <input type="text" class="phantom" value="{{ match_by_type.data.matches.handle.path }}" />
      <button class="hit-link__folder">Copy location</button>
    </div>
  </td>

  <td class="datatable__column--match">
    {% for match in rule.matches|slice:":4" %}
      {% if forloop.counter0 == 4 %}
        <div>{{ match.match }}</div>
      {% elif forloop.last %}
        <div>last!</div>
      {% else %}
        <div>{{ match.match }}</div>
      {% endif %}
    {% endfor %}
  </td>

  <td class="datatable__column--context">
    {% for match in rule.matches|slice:":4" %}
      {% if forloop.counter0 == 4 %}
        <div>{{ match.context }}</div>
      {% elif forloop.last %}
        <div>last!</div>
      {% else %}
        <div>{{ match.context }}</div>
      {% endif %}
    {% endfor %}
  </td>

</tr>
{% endfor %}

<script type="text/javascript">

  function copy() {
    var copyText = document.querySelector("input[type='text'].phantom")
    copyText.classList.remove("phantom")
    copyText.select()
    document.execCommand("copy")
    copyText.classList.add("phantom")
  }

  document.querySelectorAll(".hit-link__folder").forEach(function (c) {
    c.addEventListener("click", copy)
  })

</script>