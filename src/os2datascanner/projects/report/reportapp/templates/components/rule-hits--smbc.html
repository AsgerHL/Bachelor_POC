{% for rule in match_by_type.data.matches.matches %}
<tr tabindex="0" data-type="smbc">

  <td class="datatable__column--filetype-icon">
    <span class="icon-filetype icon-filetype--smbc">
      {% include "components/svg-icons/icon-office365.html" %}
    </span>
  </td>

  <td class="datatable__column--item">
    <span class="scan__item-title">
      <strong>{{ match_by_type.data.matches.handle.path }}</strong>
    </span>

    <span class="scan__item-count">Indeholder: <em>{{ rule.matches|length }}</em> matches</span>

    <div class="scan__item-meta">
      <span class="">{{ match_by_type.data.matches.handle.path }}</span>
    </div>

    <div class="hit-link">
      <input type="text" class="phantom" value="{{ match_by_type.data.matches.handle.path }}" />
      <button class="hit-link__folder">Copy location</button>
    </div>
  </td>

  <td class="datatable__column--match" colspan="2">

    <table>
      <tbody>
        {% for match in rule.matches|slice:":3" %}
        <tr>
          <td>{{ match.match }}</td>
          <td>{{ match.context }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <!-- {% for match in rule.matches|slice:":4" %}
      {% if forloop.counter0 == 4 %}
        <span class="force-single-line">{{ match.match }}</span>
      {% elif forloop.last %}
        <span class="force-single-line">&hellip;</span>
      {% else %}
        <span class="force-single-line">{{ match.match }}</span>
      {% endif %}
    {% endfor %} -->
  </td>

  <!-- <td class="datatable__column--context">
    {% for match in rule.matches|slice:":4" %}
      {% if forloop.counter0 == 4 %}
        <div class="force-single-line">{{ match.context }}</div>
      {% elif forloop.last %}
        <div class="force-single-line">&hellip;</div>
      {% else %}
        <div class="force-single-line">{{ match.context }}</div>
      {% endif %}
    {% endfor %}
  </td> -->

</tr>
{% endfor %}

<script type="text/javascript">

  function copy() {
    var copyText = document.querySelector("input[type='text'].phantom")
    // copyText.classList.remove("phantom")
    copyText.select()
    document.execCommand("copy")
    // copyText.classList.add("phantom")
  }

  document.querySelectorAll(".hit-link__folder").forEach(function (c) {
    c.addEventListener("click", copy)
  })

</script>